# Запуск проекта

## Deploy
### Auth-server
Для запуска docker контейнер необходимо указать следующие ENV переменные:
- PORT. На этом порту будет запущен сервер
- PROXY_URL. Url, на который будут проксироваться все запросы после успешной авторизации (NGINX)
- IDENTITY_URL. Путь до instance identity
- PERSON_AREA_URL. Путь до ЛК
- CLIENT_ID. client_id для oidc;
- CLIENT_SECRET. client_secret для oidc;
- SCOPE. oidc scope
- BACKCHANNEL_LOGOUT_PATHNAME. pathname для backchannel logout (пример, ```/account/destroyAllUserSessions```);
- REDIRECT_URI. Pathname должен быть отличным от '/', так как данный pathname будет автоматически защищен авторизацией. Данный route являются служебным и служит для парсинга параметров identity (использовать его для своих целей не рекомендуется). Указывается один uri, на него пользователь будет возвращен после успешной авторизации для получения токенов. После успешного получения токенов пользователь будет возвращен на тот route, на который он хотел попасть перед редиректом на Identity;
- POST_LOGOUT_REDIRECT_URI. Указывается один uri, на который пользователь будет перенаправлен после выхода;
- SESSION_SECRET. Любая строка. Необходима для инициализации сессии;
- STORE_URL. Путь для подключения к хранилищу (Redis);
- ENV_NAME. любая строка

### Nginx

ENV:
- **NEXT_PUBLIC_API_URL** - url основного API.

## Запуск проекта локально
Для запуска проекта локально необходимо:
- установить зависимости ```npm i```
- запустить dev-server ```npm run dev```

# Тестирование

## Компонентное тестирование
Компонентное тестирование производится с использованием rtl.

### Что тестировать
Тестируются компоненты, имеющие логику. Если логика в store, nо компонентный тест не нужен.

## Unit тестирование

### Store
Покрываем все store тестами

### Domain
Все, что находится в domain покрывается тестами

### Shared
Утилы и сервисы shared покрываются тестами

### Templates
Для генерации шаблонных сущностей, файлов или сниппетов, есть темплейты (шаблоны) для webstorm и vscode. 
